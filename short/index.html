<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Redirecting...</title>
  <script>
    async function go() {
      const key = location.pathname.split("/").pop();
      try {
        const res = await fetch("/data.txt");
        const text = await res.text();
        const map = Object.fromEntries(
          text
            .split("\n")
            .map(line => line.trim())
            .filter(line => line.includes("="))
            .map(line => {
              const [k, ...v] = line.split("=");
              return [decodeURIComponent(k), v.join("=")];
            })
        );
        const target = map[key];
        if (target) {
          location.href = target;
        } else {
          document.body.innerHTML = `<h2>404: Shortlink tidak ditemukan 😢</h2><p>Key: <code>${key}</code> nggak ada di <code>data.txt</code>.</p>`;
        }
      } catch (err) {
        document.body.innerHTML = `<h2>Gagal load data.txt 🧨</h2><p>${err}</p>`;
      }
    }
    go();
  </script>
</head>
<body>
  <h2>Redirecting... 🔁</h2>
</body>
</html>
